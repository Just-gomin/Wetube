extends layouts/main
include mixins/videoPlayer

block content
    .video-detail__container
        +videoPlayer({
            src:video.fileUrl
        })
        .video__info
            .info--header
                .info--header__main
                    .video__title=video.title
                    .video__author
                        |Uploaded by
                        a(href=routes.userDetail(video.creator.id))=video.creator.name
                if loggedUser && video.creator.id === loggedUser.id
                    a(href=routes.editVideo(video.id),class="video__editBtn") 
                        button Edit Video
            if video.views === 1
                span.video__views 1 view
            else
                span.video__views #{video.views} views
            p.video__description=video.description
        .video__comments
            if video.comments.length === 1
                .video__comments-number 1 comment
            else
                .video__comments-number #{video.comments.length} comments
            if loggedUser
                form.add__comment#jsAddComment
                    img.comment-user__avatar(src=loggedUser.avatarUrl.match(/http/) ? loggedUser.avatarUrl : `/${loggedUser.avatarUrl}`)
                    input(type="text", placeholder="Add a comment")
                    button(type="submit")#jsAddCommentButton
                        span Comment!
            ul.video__comments-list
                each comment in video.comments
                    li
                        img.comment-user__avatar(src=comment.creator.avatarUrl.match(/http/) ? comment.creator.avatarUrl : `/${comment.creator.avatarUrl}`)
                        .comment-main
                            .comment-user__name=comment.creator.name
                            .comment-text=comment.text